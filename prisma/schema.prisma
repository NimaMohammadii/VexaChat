generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


enum VerificationStatus {
  pending
  approved
  rejected
}

model Profile {
  id              String   @id @default(uuid())
  name            String
  age             Int
  city            String
  price           Int
  description     String
  images          String[]
  height          String   @default("")
  languages       String[] @default([])
  availability    String   @default("Unavailable")
  verified        Boolean  @default(false)
  isTop           Boolean  @default(false)
  experienceYears Int      @default(0)
  rating          Float    @default(0)
  services        String[] @default([])
  imageUrl        String   @default("")
  ownerUserId     String?
  rejectionNote   String?
  createdAt       DateTime @default(now())
  favorites       Favorite[]

  @@index([ownerUserId])
  @@index([verified])
}

model Favorite {
  id        String   @id @default(cuid())
  userId    String
  profileId String
  createdAt DateTime @default(now())
  profile   Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)

  @@unique([userId, profileId])
  @@index([userId])
  @@index([profileId])
}

model UserProfile {
  id        String   @id @default(uuid())
  userId    String   @unique
  name      String
  username  String   @unique
  bio       String   @default("")
  avatarUrl        String   @default("")
  identityVerified Boolean  @default(false)
  identityStatus   String   @default("none")
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model VerificationRequest {
  id        String             @id @default(uuid())
  userId    String
  status    VerificationStatus @default(pending)
  docUrls   Json
  note      String?
  adminNote String?
  createdAt DateTime           @default(now())
  updatedAt DateTime           @updatedAt

  @@index([userId])
  @@index([status])
}

enum MeetRequestStatus {
  pending
  accepted
  rejected
  canceled
}

model MeetCard {
  id               String   @id @default(cuid())
  userId           String   @unique
  displayName      String
  age              Int
  city             String
  gender           String
  lookingFor       String
  intentTags       String[]
  bio              String?
  imageUrl         String
  isAdultConfirmed Boolean  @default(false)
  adultConfirmedAt DateTime?
  isActive         Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model MeetLikeRequest {
  id         String            @id @default(cuid())
  fromUserId String
  toUserId   String
  status     MeetRequestStatus @default(pending)
  createdAt  DateTime          @default(now())
  updatedAt  DateTime          @updatedAt

  @@unique([fromUserId, toUserId])
  @@index([toUserId, status])
}

model MeetMatch {
  id         String   @id @default(cuid())
  userLowId  String
  userHighId String
  createdAt  DateTime @default(now())

  @@unique([userLowId, userHighId])
}

model MeetNotification {
  id        String   @id @default(cuid())
  userId    String
  type      String
  data      Json
  readAt    DateTime?
  createdAt DateTime @default(now())
}

model MeetPass {
  id         String   @id @default(cuid())
  fromUserId String
  toUserId   String
  createdAt  DateTime @default(now())
}

model MeetBlock {
  id            String   @id @default(cuid())
  blockerUserId String
  blockedUserId String
  createdAt     DateTime @default(now())

  @@unique([blockerUserId, blockedUserId])
}

model HomeSection {
  id        String   @id @default(cuid())
  title     String
  subtitle  String?
  imageUrl  String
  order     Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([isActive, order])
}
